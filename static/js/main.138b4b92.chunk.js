(this["webpackJsonpto-do-list"]=this["webpackJsonpto-do-list"]||[]).push([[0],{17:function(e,t,a){e.exports={allTasksWrapper:"AllTasks_allTasksWrapper__1UheL",allTasks:"AllTasks_allTasks__3jm6-",header:"AllTasks_header__YzbYR",headerText:"AllTasks_headerText__3foYd",headerLink:"AllTasks_headerLink__2oSo_",inputForm:"AllTasks_inputForm__1y5iu",tasks:"AllTasks_tasks__1glog"}},20:function(e,t,a){e.exports={task:"Task_task__2i8xg",state:"Task_state__3ZMHM",deleteBtn:"Task_deleteBtn__17owL",checkBtn:"Task_checkBtn__2ZdP8",text:"Task_text__Xthyq",high:"Task_high___AUQL",low:"Task_low__29NL3",done:"Task_done__1oz61",newName:"Task_newName__1piZk"}},21:function(e,t,a){e.exports={list:"List_list__3-ERM",link:"List_link__YbwRo",btns:"List_btns__1cdxj",newName:"List_newName__19D8Q"}},22:function(e,t,a){e.exports={allTasksWrapper:"Lists_allTasksWrapper__2REvb",allTasks:"Lists_allTasks__3M8dN",header:"Lists_header__1VL64",headerText:"Lists_headerText__3WRBx",headerLink:"Lists_headerLink__1qIC1",inputForm:"Lists_inputForm__2SpqJ",tasks:"Lists_tasks__2lp69"}},23:function(e,t,a){e.exports={form:"LoginForm_form__IPpdV",formWrapper:"LoginForm_formWrapper__1cpaO",text:"LoginForm_text__3Brut",checkbox:"LoginForm_checkbox__1mSLW",btn:"LoginForm_btn__IM4EY",linkWrapper:"LoginForm_linkWrapper__hxDC4",link:"LoginForm_link__ZZRpn"}},30:function(e,t,a){e.exports={form:"RegForm_form__3CT8P",formWrapper:"RegForm_formWrapper__1yt4d",text:"RegForm_text__2OYST",checkbox:"RegForm_checkbox__aFTbp",btn:"RegForm_btn__39lHG",linkWrapper:"RegForm_linkWrapper__2iD1h",link:"RegForm_link__3uK-D"}},34:function(e,t,a){e.exports={header:"Header_header__3uznX",logout:"Header_logout__36Qlm",logoutText:"Header_logoutText__1wuky",logoutBtn:"Header_logoutBtn__dE7fp"}},41:function(e,t,a){e.exports={form:"InputForm_form__K2ZVr",text:"InputForm_text__3Icxu",addBtn:"InputForm_addBtn__1129H",isNow:"InputForm_isNow__1B2Di"}},48:function(e,t,a){e.exports={form:"InputFormList_form__1PVH_",text:"InputFormList_text__1KX87",addBtn:"InputFormList_addBtn__3w8m6"}},60:function(e,t,a){e.exports={todo:"ToDoList_todo__1yxY9"}},62:function(e,t,a){e.exports=a(92)},67:function(e,t,a){},71:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),c=a.n(s),o=(a(67),a(5)),i=a(18),l=(a(71),a(4)),u=a(3),m=a.n(u),d=a(7),p=a(25),f=a(8),h={tasks:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-TASK":return Object(p.a)(Object(p.a)({},e),{},{tasks:t.tasks.task});default:return e}},_=function(e){return{type:"SET-TASK",tasks:e}},b=a(24),v=a(41),E=a.n(v),g=function(e){var t=Object(b.useForm)(),a=t.register,n=t.handleSubmit,s=t.setValue;return r.a.createElement("form",{className:E.a.form,onSubmit:n((function(t){var a={taskText:t.taskText,isNow:t.isNow,isDone:"false"};e.useNewTask(a),s("taskText","")}))},r.a.createElement("input",{className:E.a.text,name:"taskText",ref:a,placeholder:"Enter your task"}),r.a.createElement("div",{className:E.a.isNow},r.a.createElement("label",{for:"isNow"},"\u0421\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("input",{name:"isNow",ref:a,id:"isNow",type:"checkbox"})),r.a.createElement("input",{className:E.a.addBtn,type:"submit",value:"ADD"}))},N=a(12),w=a(14),T=a(20),x=a.n(T),O=function(e){console.log(e);var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],c=a[1],i=Object(n.useState)(e.taskName),u=Object(w.a)(i,2),p=u[0],h=u[1],k=Object(o.b)(),_=e.task;if("false"==_.isDone){if(_.isNow)var b=x.a.high;else if(!_.isNow)b=x.a.low}else b=x.a.done;return Object(o.c)((function(e){return e.authPage.isAuth}))?r.a.createElement("div",null,s?r.a.createElement("input",{className:x.a.newName,onChange:function(e){var t=e.target.value;h(t)},autoFocus:!0,value:p,onBlur:function(){c(!1),console.log(s);var t=window.location.href,a=(t=t.split("/"))[t.length-1],n=e.task;n.taskText=p,k(function(e,t,a){return function(){var n=Object(d.a)(m.a.mark((function n(r){var s,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=a.id,(c={})[s]=a,f.database().ref(e).child("taskList").child(t).child("task").update(c);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e.uid,a,n))}}):r.a.createElement("div",{className:"".concat(x.a.task," + ").concat(b)},r.a.createElement("div",{className:x.a.text},_.taskText),r.a.createElement("button",Object(N.a)({className:x.a.update,onClick:function(){c(!0)}},"className",x.a.deleteBtn),"Rename"),"true"==_.isDone?r.a.createElement("button",{onClick:function(){return e.deleteTask(_.id)},className:x.a.deleteBtn},"Delete"):r.a.createElement("button",{onClick:function(){return function(t){var a=window.location.href,n=(a=a.split("/"))[a.length-1];t.isDone="true",e.checkTask(n,t)}(e.task)},className:x.a.checkBtn},"Check done"))):r.a.createElement(l.a,{to:"/"})},j=a(17),L=a.n(j),y=function(){var e=Object(o.c)((function(e){return e.taskPage.tasks})),t=Object(o.c)((function(e){return e.authPage.isAuth})),a=Object(o.c)((function(e){return e.authPage.userUid})),s=Object(o.b)();function c(e){var t=window.location.href,n=(t=t.split("/"))[t.length-1];s(function(e,t,a){return function(){var n=Object(d.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.database().ref(e).child("taskList").child(t).child("task").child(a).remove();case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,n,e))}function u(e,t){s(function(e,t,a){return function(){var n=Object(d.a)(m.a.mark((function n(r){var s,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s={},c=a.id,s[c]=a,f.database().ref(e).child("taskList").child(t).child("task").update(s);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,e,t))}function p(e){var t=window.location.href,n=(t=t.split("/"))[t.length-1];s(function(e,t,a){return function(){var n=Object(d.a)(m.a.mark((function n(r){var s,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=f.database().ref("task").push().key,c={},a.id=s,c[s]=a,f.database().ref(e).child("taskList").child(t).child("task").update(c);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,n,e))}if(Object(n.useEffect)((function(){var e=window.location.href,t=(e=e.split("/"))[e.length-1];s(function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:f.database().ref(e).child("taskList").on("value",(function(e){var a=e.val();console.log(a);var r=a[t];n(_(r))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a,t))}),[]),!t)return r.a.createElement(l.a,{to:"/"});var h=[];return h=e?Object.values(e):[],r.a.createElement("div",{className:L.a.allTasksWrapper},h.length>0?r.a.createElement("div",{className:L.a.allTasks},r.a.createElement("div",{className:L.a.header},r.a.createElement("h2",{className:L.a.headerText},"Active Tasks: ",h.filter((function(e){return"false"==e.isDone})).length,r.a.createElement(i.b,{className:L.a.headerLink,to:"/taskList"},"back")," "),r.a.createElement("div",{className:L.a.inputForm},r.a.createElement(g,{useNewTask:p}))),r.a.createElement("div",{className:L.a.tasks},h.map((function(e){return r.a.createElement(O,{task:e,deleteTask:c,checkTask:u})})))):r.a.createElement("div",{className:L.a.allTasks},r.a.createElement("div",{className:L.a.header},r.a.createElement("h2",{className:L.a.headerText},"Active Tasks: 0",r.a.createElement(i.b,{className:L.a.headerLink,to:"/taskList"}," back ")),r.a.createElement("div",{className:L.a.inputForm},r.a.createElement(g,{useNewTask:p})))))},A={login:"login",isAuth:!1,userUid:""},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},S=function(e,t,a){return{type:"SET-USER-DATA",payload:{login:e,isAuth:t,userUid:a}}},B=a(34),P=a.n(B),W=function(){var e=Object(o.c)((function(e){return e.authPage.isAuth})),t=Object(o.c)((function(e){return e.authPage.login})),a=Object(o.b)();return r.a.createElement("div",{className:P.a.header},r.a.createElement("div",{className:P.a.headerText},r.a.createElement("h1",null,"ToDoList")),r.a.createElement("div",{className:P.a.logoutBlock},e?r.a.createElement("div",{className:P.a.logout},r.a.createElement("p",{className:P.a.logoutText},t),r.a.createElement("div",null,r.a.createElement("button",{className:P.a.logoutBtn,onClick:function(){return a(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.auth().signOut().then((function(){t(S("",!1))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"LogOut"))):r.a.createElement("p",null)))},D=a(48),R=a.n(D),I=function(e){var t=Object(b.useForm)(),a=t.register,n=t.handleSubmit,s=t.setValue;return r.a.createElement("form",{className:R.a.form,onSubmit:n((function(t){var a={taskListName:t.taskText};e.useNewTask(a),s("taskText","")}))},r.a.createElement("input",{className:R.a.text,name:"taskText",ref:a,placeholder:"Enter your task"}),r.a.createElement("input",{className:R.a.addBtn,value:"ADD",type:"submit"}))},C={lists:[{}]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-LIST":return Object(p.a)(Object(p.a)({},e),{},{lists:t.lists});default:return e}},H=a(21),V=a.n(H),q=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(e.taskName),u=Object(w.a)(l,2),p=u[0],h=u[1],k=Object(o.b)();return r.a.createElement("div",null,s?r.a.createElement("input",{className:V.a.newName,onChange:function(e){var t=e.target.value;h(t)},autoFocus:!0,value:p,onBlur:function(){c(!1),console.log(s),console.log(e);var t=e.list;t.taskListName=p,k(function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){var r,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=t.id,(s={})[r]=t,f.database().ref(e).child("taskList").update(s);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e.uid,t))}}):r.a.createElement("div",{className:"".concat(V.a.list)},r.a.createElement(i.b,{className:"".concat(V.a.link),to:"/taskList/".concat(e.list.id)},r.a.createElement("div",{className:V.a.text},e.list.taskListName)),r.a.createElement("div",{className:V.a.btns},r.a.createElement("button",Object(N.a)({className:V.a.update,onClick:function(){c(!0)}},"className",V.a.deleteBtn),"Rename"),r.a.createElement("button",Object(N.a)({className:V.a.delete,onClick:function(){return e.deleteList(e.list.id)}},"className",V.a.deleteBtn),"Delete"))))},K=a(22),M=a.n(K),Y=function(){var e=Object(o.c)((function(e){return e.listPage.lists})),t=Object(o.c)((function(e){return e.authPage.userUid})),a=Object(o.c)((function(e){return e.listPage.lists.taskListName})),s=Object(o.b)();function c(e){s(function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){var r,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:f.database().ref(e).child("taskList"),r=f.database().ref(e).child("taskList").push().key,s={},t.id=r,s[r]=t,f.database().ref(e).child("taskList").update(s);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,e))}function i(e){s(function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log(t),f.database().ref(e).child("taskList").child(t).remove();case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,e))}if(Object(n.useEffect)((function(){s(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.database().ref(e).child("taskList").on("value",(function(e){var t=e.val();a({type:"SET-LIST",lists:t})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]),!Object(o.c)((function(e){return e.authPage.isAuth})))return r.a.createElement(l.a,{to:"/"});var u=[];return u=e?Object.values(e):[],r.a.createElement("div",{className:M.a.allTasksWrapper},u.length>0?r.a.createElement("div",{className:M.a.allTasks},r.a.createElement("div",{className:M.a.header},r.a.createElement("h2",{className:M.a.headerText},"All Tasks"),r.a.createElement("div",{className:M.a.inputForm},r.a.createElement(I,{useNewTask:c}))),r.a.createElement("div",{className:M.a.tasks},u.length>1?u.map((function(e){return r.a.createElement(q,{list:e,deleteList:i,uid:t,taskName:a})})):r.a.createElement(q,{list:u[0],deleteList:i,uid:t}))):r.a.createElement("div",{className:M.a.allTasks},r.a.createElement("div",{className:M.a.header},r.a.createElement("h2",null,"All Tasks: 0"),r.a.createElement("div",{className:M.a.inputForm},r.a.createElement(I,{useNewTask:c})))))},Z=a(47),z=a(29),X=a(23),Q=a.n(X),J=z.a().shape({login:z.b().required(),password:z.b().required()}),G=function(){var e,t,a=Object(o.c)((function(e){return e.authPage.isAuth})),n=(Object(o.c)((function(e){return e.authPage.userUid})),Object(o.b)()),s=Object(b.useForm)({resolver:Object(Z.yupResolver)(J)}),c=s.register,u=s.handleSubmit,p=s.setValue,h=s.errors;return a?r.a.createElement(l.a,{to:"/taskList"}):r.a.createElement("form",{className:Q.a.form,onSubmit:u((function(e){var t,a;n((t=e.login,a=e.password,e.rememberme,function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.auth().signInWithEmailAndPassword(t,a).catch((function(e){console.log(e)})),f.auth().onAuthStateChanged((function(e){e?e.email==t&&n(S(t,!0,e.uid)):n(S("",!1))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),p("login",""),p("password","")}))},r.a.createElement("div",{className:Q.a.formWrapper},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{name:"login",ref:c,className:Q.a.text,type:"text",placeholder:"Enter login"}),r.a.createElement("p",null,null===(e=h.login)||void 0===e?void 0:e.message),r.a.createElement("input",{name:"password",ref:c,className:Q.a.text,type:"password",placeholder:"Enter password"}),r.a.createElement("p",null,null===(t=h.password)||void 0===t?void 0:t.message),r.a.createElement("div",{className:Q.a.checkbox},r.a.createElement("label",{for:"rememberme"},"Remember me"),r.a.createElement("input",{name:"rememberme",ref:c,className:Q.a.check,type:"checkbox",id:"rememberme"})),r.a.createElement("input",{className:Q.a.btn,type:"submit",value:"Login"})),r.a.createElement("div",{className:Q.a.linkWrapper},r.a.createElement(i.b,{className:Q.a.link,to:"/registration"},"Create account?")))},$=a(60),ee=a.n($),te=a(30),ae=a.n(te),ne=z.a().shape({login:z.b().required(),password:z.b().required()}),re=function(){var e,t,a=Object(o.c)((function(e){return e.authPage.isAuth})),n=Object(o.b)(),s=Object(b.useForm)({resolver:Object(Z.yupResolver)(ne)}),c=s.register,u=s.handleSubmit,p=s.setValue,h=s.errors;return a?r.a.createElement(l.a,{to:"/taskList"}):r.a.createElement("form",{className:ae.a.form,onSubmit:u((function(e){var t,a;n((t=e.login,a=e.password,function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.auth().createUserWithEmailAndPassword(t,a).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),p("login",""),p("password","")}))},r.a.createElement("div",{className:ae.a.formWrapper},r.a.createElement("h2",null,"Create account"),r.a.createElement("input",{name:"login",ref:c,className:ae.a.text,type:"text",placeholder:"Enter login"}),r.a.createElement("p",null,null===(e=h.login)||void 0===e?void 0:e.message),r.a.createElement("input",{name:"password",ref:c,className:ae.a.text,type:"password",placeholder:"Enter password"}),r.a.createElement("p",null,null===(t=h.password)||void 0===t?void 0:t.message),r.a.createElement("input",{className:ae.a.btn,type:"submit",value:"Create account"}),r.a.createElement("div",{className:ae.a.linkWrapper},r.a.createElement(i.b,{className:ae.a.link,to:"/"},"Login?"))))},se=Object(l.f)((function(){return r.a.createElement("div",{className:ee.a.todo},r.a.createElement(W,null),r.a.createElement(l.b,{path:"/taskList/:taskId",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(l.b,{exact:!0,path:"/taskList",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(l.b,{exact:!0,path:"/",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(l.b,{path:"/registration",render:function(){return r.a.createElement(re,null)}}))})),ce=a(33),oe=a(61),ie=Object(ce.c)({taskPage:k,listPage:U,authPage:F}),le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d,ue=Object(ce.e)(ie,le(Object(ce.a)(oe.a))),me=function(){return r.a.createElement(o.a,{store:ue},r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.initializeApp({apiKey:"AIzaSyBwbpTx7d1a0DUP2jHqAaKkZhl7sjW6QPA",authDomain:"todolist-3009f.firebaseapp.com",databaseURL:"https://todolist-3009f.firebaseio.com",projectId:"todolist-3009f",storageBucket:"todolist-3009f.appspot.com",messagingSenderId:"907810208879",appId:"1:907810208879:web:6d6bd6059a7bb44c3ce19a"}),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.138b4b92.chunk.js.map
(this["webpackJsonpto-do-list"]=this["webpackJsonpto-do-list"]||[]).push([[0],{14:function(e,t,a){e.exports={allTasksWrapper:"AllTasks_allTasksWrapper__1UheL",allTasks:"AllTasks_allTasks__3jm6-",header:"AllTasks_header__YzbYR",headerText:"AllTasks_headerText__3foYd",headerLink:"AllTasks_headerLink__2oSo_",inputForm:"AllTasks_inputForm__1y5iu",tasks:"AllTasks_tasks__1glog"}},208:function(e,t,a){e.exports={todo:"ToDoList_todo__1yxY9"}},209:function(e,t,a){e.exports=a(397)},21:function(e,t,a){e.exports={task:"Task_task__2i8xg",state:"Task_state__3ZMHM",deleteBtn:"Task_deleteBtn__17owL",checkBtn:"Task_checkBtn__2ZdP8",text:"Task_text__Xthyq",high:"Task_high___AUQL",low:"Task_low__29NL3",done:"Task_done__1oz61",newName:"Task_newName__1piZk"}},22:function(e,t,a){e.exports={allTasksWrapper:"Lists_allTasksWrapper__2REvb",allTasks:"Lists_allTasks__3M8dN",header:"Lists_header__1VL64",headerText:"Lists_headerText__3WRBx",headerLink:"Lists_headerLink__1qIC1",inputForm:"Lists_inputForm__2SpqJ",tasks:"Lists_tasks__2lp69"}},23:function(e,t,a){e.exports={form:"LoginForm_form__IPpdV",formWrapper:"LoginForm_formWrapper__1cpaO",text:"LoginForm_text__3Brut",checkbox:"LoginForm_checkbox__1mSLW",btn:"LoginForm_btn__IM4EY",linkWrapper:"LoginForm_linkWrapper__hxDC4",link:"LoginForm_link__ZZRpn"}},33:function(e,t,a){e.exports={list:"List_list__3-ERM",link:"List_link__YbwRo",btns:"List_btns__1cdxj",updateBtn:"List_updateBtn__8W_Cj",deleteBtn:"List_deleteBtn__2zZKX",newName:"List_newName__19D8Q"}},34:function(e,t,a){e.exports={form:"RegForm_form__3CT8P",formWrapper:"RegForm_formWrapper__1yt4d",text:"RegForm_text__2OYST",checkbox:"RegForm_checkbox__aFTbp",btn:"RegForm_btn__39lHG",linkWrapper:"RegForm_linkWrapper__2iD1h",link:"RegForm_link__3uK-D"}},385:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(87),l=a.n(s),c=a(130),i=a.n(c),o=(a(214),a(216),a(3)),u=a(61),m=a(2),d=a(17),p=(a(385),a(40)),f=a(18),_=function(e){return{type:"SET-TASK",tasks:e}};var h={tasks:_.SET_TASK},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-TASK":return Object.assign({},e,Object(f.a)(Object(f.a)({},e),{},{tasks:t.tasks.task}));default:return e}},g=function(e){return{type:"SET-LIST",lists:e}};var b={lists:g.SET_LIST},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-LIST":return Object.assign({},e,Object(f.a)(Object(f.a)({},e),{},{lists:t.lists}));default:return e}},v=function(e,t,a){return{type:"SET-USER-DATA",payload:{login:e,isAuth:t,userUid:a}}},T=function(e){return{type:"SET-IS-AUTH",isAuth:e}};function N(e,t){return function(a,n,r){return r().auth().signInWithEmailAndPassword(e,t).then((function(){a(function(e){return function(t,a,n){var r=n().auth().currentUser;r&&r.email===e&&(localStorage.setItem("uid",r.uid),localStorage.setItem("isAuth","true"),localStorage.setItem("login",e),t(v(e,!0,r.uid)),t(T(!0)))}}(e))}))}}var w={payload:v.SET_USER_DATA,login:"",isAuth:v.SET_IS_AUTH,userUid:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object.assign({},e,Object(f.a)(Object(f.a)({},e),t.payload));case"SET-IS-AUTH":return Object.assign({},e,Object(f.a)(Object(f.a)({},e),{},{isAuth:t.isAuth}));default:return e}},x=[a(204).a.withExtraArgument(u.getFirebase)],S=Object(p.c)({taskPage:k,listPage:E,authPage:L}),j=window&&window.__INITIAL_STATE__||p.d,O=Object(p.e)(S,j(p.a.apply(void 0,x))),A=a(41),I=a.n(A),F=function(){Object(o.c)((function(e){return e.authPage.isAuth}));var e=localStorage.getItem("isAuth"),t=localStorage.getItem("login"),a=Object(o.b)(),n=function(){a((function(e,t,a){return localStorage.setItem("uid",""),localStorage.setItem("isAuth","false"),localStorage.setItem("login",""),a().auth().signOut().then((function(){e(v("",!1,"")),e(T(!1))}))}))};return r.a.createElement("div",{className:I.a.header},r.a.createElement("div",{className:I.a.headerText},r.a.createElement("h1",null,"ToDoList")),r.a.createElement("div",{className:I.a.logoutBlock},"true"===e?r.a.createElement("div",{className:I.a.logout},r.a.createElement("p",{className:I.a.logoutText},t),r.a.createElement("div",null,r.a.createElement("button",{className:I.a.logoutBtn,onClick:function(){return n()}},"LogOut"))):r.a.createElement("p",null)))},y=a(28),B=a(63),W=a.n(B),R=function(e){var t=Object(y.useForm)(),a=t.register,n=t.handleSubmit,s=t.setValue;return r.a.createElement("form",{className:W.a.form,onSubmit:n((function(t){var a={taskText:t.taskText,isNow:t.isNow,isDone:"false"};e.useNewTask(a),s("taskText","")}))},r.a.createElement("input",{className:W.a.text,name:"taskText",ref:a,placeholder:"Enter your task"}),r.a.createElement("div",{className:W.a.isNow},r.a.createElement("label",{for:"isNow"},"\u0421\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("input",{name:"isNow",ref:a,id:"isNow",type:"checkbox"})),r.a.createElement("input",{className:W.a.addBtn,type:"submit",value:"ADD"}))},D=a(11),P=a(21),C=a.n(P),U=function(e){var t=Object(n.useState)(!1),a=Object(D.a)(t,2),s=a[0],l=a[1],c=Object(n.useState)(e.taskName),i=Object(D.a)(c,2),u=i[0],m=i[1],d=Object(o.b)(),p=e.task;if("false"===p.isDone){if(p.isNow)var f=C.a.high;else if(!p.isNow)f=C.a.low}else f=C.a.done;return r.a.createElement("div",null,s?r.a.createElement("input",{className:C.a.newName,onChange:function(e){var t=e.target.value;m(t)},autoFocus:!0,value:u,onBlur:function(){l(!1);var t=window.location.href,a=(t=t.split("/"))[t.length-1],n=e.task;n.taskText=u,d(function(e,t,a){return function(n,r,s){e||(e=localStorage.getItem("uid"));var l={};return l[a.id]=a,s().database().ref(e).child("taskList").child(t).child("task").update(l)}}(e.uid,a,n))}}):r.a.createElement("div",{className:"".concat(C.a.task," + ").concat(f)},r.a.createElement("div",{className:C.a.text},p.taskText),r.a.createElement("button",{className:C.a.checkBtn,onClick:function(){l(!0)}},"Rename"),"true"===p.isDone?r.a.createElement("button",{onClick:function(){return e.deleteTask(p.id)},className:C.a.deleteBtn},"Delete"):r.a.createElement("button",{onClick:function(){return function(t){var a=window.location.href,n=(a=a.split("/"))[a.length-1];t.isDone="true",e.checkTask(n,t)}(e.task)},className:C.a.checkBtn},"Check done")))},H=a(14),K=a.n(H),q=function(){var e=Object(o.c)((function(e){return e.taskPage.tasks})),t=(Object(o.c)((function(e){return e.authPage.isAuth})),Object(o.c)((function(e){return e.authPage.userUid}))),a=localStorage.getItem("isAuth"),s=Object(o.b)();function l(e){var a=window.location.href,n=(a=a.split("/"))[a.length-1];s(function(e,t,a){return function(n,r,s){return e||(e=localStorage.getItem("uid")),s().database().ref(e).child("taskList").child(t).child("task").child(a).remove()}}(t,n,e))}function c(e,a){s(function(e,t,a){return function(n,r,s){e||(e=localStorage.getItem("uid"));var l={};return l[a.id]=a,s().database().ref(e).child("taskList").child(t).child("task").update(l)}}(t,e,a))}function i(e){var a=window.location.href,n=(a=a.split("/"))[a.length-1];s(function(e,t,a){return function(n,r,s){e||(e=localStorage.getItem("uid"));var l=s().database().ref("task").push().key,c={};return a.id=l,c[l]=a,s().database().ref(e).child("taskList").child(t).child("task").update(c)}}(t,n,e))}Object(n.useEffect)((function(){var e=window.location.href,a=(e=e.split("/"))[e.length-1];s(function(e,t){return function(a,n,r){return e||(e=localStorage.getItem("uid")),r().database().ref(e).child("taskList").child(t).on("value",(function(e){var t=e.val();a(_(t))}))}}(t,a))}),[]);var u=Object(m.f)();"false"===a&&u.push("/");var p=[];return p=e?Object.values(e):[],r.a.createElement("div",{className:K.a.allTasksWrapper},p.length>0?r.a.createElement("div",{className:K.a.allTasks},r.a.createElement("div",{className:K.a.header},r.a.createElement("h2",{className:K.a.headerText},"Active Tasks: ",p.filter((function(e){return"false"===e.isDone})).length,r.a.createElement(d.b,{className:K.a.headerLink,to:"/taskList"},"back")," "),r.a.createElement("div",{className:K.a.inputForm},r.a.createElement(R,{useNewTask:i}))),r.a.createElement("div",{className:K.a.tasks},p.map((function(e){return r.a.createElement(U,{task:e,deleteTask:l,checkTask:c,uid:t})})))):r.a.createElement("div",{className:K.a.allTasks},r.a.createElement("div",{className:K.a.header},r.a.createElement("h2",{className:K.a.headerText},"Active Tasks: 0",r.a.createElement(d.b,{className:K.a.headerLink,to:"/taskList"}," back ")),r.a.createElement("div",{className:K.a.inputForm},r.a.createElement(R,{useNewTask:i})))))},V=a(91),Z=a.n(V),Y=function(e){var t=Object(y.useForm)(),a=t.register,n=t.handleSubmit,s=t.setValue;return r.a.createElement("form",{className:Z.a.form,onSubmit:n((function(t){var a={taskListName:t.taskText};e.useNewTask(a),s("taskText","")}))},r.a.createElement("input",{className:Z.a.text,name:"taskText",ref:a,placeholder:"Enter your task"}),r.a.createElement("input",{className:Z.a.addBtn,value:"ADD",type:"submit"}))},z=a(33),M=a.n(z),Q=function(e){var t=Object(o.c)((function(e){return e.listPage.lists.taskListName})),a=Object(n.useState)(!1),s=Object(D.a)(a,2),l=s[0],c=s[1],i=Object(n.useState)(t),u=Object(D.a)(i,2),m=u[0],p=u[1],f=Object(o.b)();return r.a.createElement("div",null,l?r.a.createElement("input",{className:M.a.newName,onChange:function(e){var t=e.target.value;p(t)},autoFocus:!0,value:m,onBlur:function(){c(!1);var t=e.list;t.taskListName=m,f(function(e,t){return function(a,n,r){e||(e=localStorage.getItem("uid"));var s={};return s[t.id]=t,r().database().ref(e).child("taskList").update(s)}}(e.uid,t))}}):r.a.createElement("div",{className:"".concat(M.a.list)},r.a.createElement(d.b,{className:"".concat(M.a.link),to:"/taskList/".concat(e.list.id)},r.a.createElement("div",{className:M.a.text},e.list.taskListName)),r.a.createElement("div",{className:M.a.btns},r.a.createElement("button",{className:M.a.updateBtn,onClick:function(){c(!0)}},"Rename"),r.a.createElement("button",{className:M.a.deleteBtn,onClick:function(){return e.deleteList(e.list.id)}},"Delete"))))},X=a(22),J=a.n(X),G=function(){var e=Object(o.c)((function(e){return e.listPage.lists})),t=localStorage.getItem("uid"),a=localStorage.getItem("isAuth"),s=(Object(o.c)((function(e){return e.authPage.isAuth})),Object(o.c)((function(e){return e.authPage.login})),Object(m.f)()),l=Object(o.b)();function c(e){l(function(e,t){return function(a,n,r){e||(e=localStorage.getItem("uid")),r().database().ref(e).child("taskList");var s=r().database().ref(e).child("taskList").push().key,l={};return t.id=s,l[s]=t,r().ref(e).child("taskList").update(l)}}(t,e))}function i(e){l(function(e,t){return function(a,n,r){return e||(e=localStorage.getItem("uid")),r().database().ref(e).child("taskList").child(t).remove()}}(t,e))}Object(n.useEffect)((function(){l(function(e){return function(t,a,n){return e||(e=localStorage.getItem("uid")),n().database().ref(e).child("taskList").on("value",(function(e){var a=e.val();t(g(a))}))}}(t))}),[]),"false"===a&&(console.log("push /"),s.push("/"));var u=[];return u=e?Object.values(e):[],r.a.createElement("div",{className:J.a.allTasksWrapper},u.length>0?r.a.createElement("div",{className:J.a.allTasks},r.a.createElement("div",{className:J.a.header},r.a.createElement("h2",{className:J.a.headerText},"All Tasks"),r.a.createElement("div",{className:J.a.inputForm},r.a.createElement(Y,{useNewTask:c}))),r.a.createElement("div",{className:J.a.tasks},u.length>1?u.map((function(e){return r.a.createElement(Q,{list:e,deleteList:i,uid:t})})):r.a.createElement(Q,{list:u[0],deleteList:i,uid:t}))):r.a.createElement("div",{className:J.a.allTasks},r.a.createElement("div",{className:J.a.header},r.a.createElement("h2",null,"All Tasks: 0"),r.a.createElement("div",{className:J.a.inputForm},r.a.createElement(Y,{useNewTask:c})))))},$=a(90),ee=a(32),te=a(23),ae=a.n(te),ne=ee.a().shape({login:ee.b().required(),password:ee.b().required()}),re=function(){Object(o.c)((function(e){return e.authPage.isAuth})),localStorage.getItem("uid");var e,t,a=localStorage.getItem("isAuth"),n=Object(o.b)(),s=Object(y.useForm)({resolver:Object($.yupResolver)(ne)}),l=s.register,c=s.handleSubmit,i=s.setValue,u=s.errors;return"true"===a?r.a.createElement(m.a,{to:"/taskList"}):r.a.createElement("form",{className:ae.a.form,onSubmit:c((function(e){n(N(e.login,e.password,e.rememberme)),i("login",""),i("password","")}))},r.a.createElement("div",{className:ae.a.formWrapper},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{name:"login",ref:l,className:ae.a.text,type:"text",placeholder:"Enter login"}),r.a.createElement("p",null,null===(e=u.login)||void 0===e?void 0:e.message),r.a.createElement("input",{name:"password",ref:l,className:ae.a.text,type:"password",placeholder:"Enter password"}),r.a.createElement("p",null,null===(t=u.password)||void 0===t?void 0:t.message),r.a.createElement("div",{className:ae.a.checkbox},r.a.createElement("label",{for:"rememberme"},"Remember me"),r.a.createElement("input",{name:"rememberme",ref:l,className:ae.a.check,type:"checkbox",id:"rememberme"})),r.a.createElement("input",{className:ae.a.btn,type:"submit",value:"Login"})),r.a.createElement("div",{className:ae.a.linkWrapper},r.a.createElement(d.b,{className:ae.a.link,to:"/registration"},"Create account?")))},se=a(34),le=a.n(se),ce=ee.a().shape({login:ee.b().required(),password:ee.b().required()}),ie=function(){var e,t,a=Object(o.c)((function(e){return e.authPage.isAuth})),n=Object(o.b)(),s=Object(y.useForm)({resolver:Object($.yupResolver)(ce)}),l=s.register,c=s.handleSubmit,i=s.setValue,u=s.errors;return a?r.a.createElement(m.a,{to:"/taskList"}):r.a.createElement("form",{className:le.a.form,onSubmit:c((function(e){var t,a;n((t=e.login,a=e.password,function(e,n,r){return r().auth().createUserWithEmailAndPassword(t,a).then((function(){e(N(t,a))}))})),i("login",""),i("password","")}))},r.a.createElement("div",{className:le.a.formWrapper},r.a.createElement("h2",null,"Create account"),r.a.createElement("input",{name:"login",ref:l,className:le.a.text,type:"text",placeholder:"Enter login"}),r.a.createElement("p",null,null===(e=u.login)||void 0===e?void 0:e.message),r.a.createElement("input",{name:"password",ref:l,className:le.a.text,type:"password",placeholder:"Enter password"}),r.a.createElement("p",null,null===(t=u.password)||void 0===t?void 0:t.message),r.a.createElement("input",{className:le.a.btn,type:"submit",value:"Create account"}),r.a.createElement("div",{className:le.a.linkWrapper},r.a.createElement(d.b,{className:le.a.link,to:"/"},"Login?"))))},oe=a(208),ue=a.n(oe),me={apiKey:"AIzaSyBwbpTx7d1a0DUP2jHqAaKkZhl7sjW6QPA",authDomain:"todolist-3009f.firebaseapp.com",databaseURL:"https://todolist-3009f.firebaseio.com",projectId:"todolist-3009f",storageBucket:"todolist-3009f.appspot.com",messagingSenderId:"907810208879",appId:"1:907810208879:web:6d6bd6059a7bb44c3ce19a"};i.a.initializeApp(me);var de=Object(m.g)((function(){return r.a.createElement("div",{className:ue.a.todo},r.a.createElement(F,null),r.a.createElement(m.b,{path:"/taskList/:taskId",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(m.b,{exact:!0,path:"/taskList",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(m.b,{path:"/registration",render:function(){return r.a.createElement(ie,null)}}))})),pe=function(){return r.a.createElement(o.a,{store:O},r.a.createElement(u.ReactReduxFirebaseProvider,{firebase:i.a,config:me,dispatch:O.dispatch},r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement(de,null)))))};a(396),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,a){e.exports={header:"Header_header__3uznX",logout:"Header_logout__36Qlm",logoutText:"Header_logoutText__1wuky",logoutBtn:"Header_logoutBtn__dE7fp"}},63:function(e,t,a){e.exports={form:"InputForm_form__K2ZVr",text:"InputForm_text__3Icxu",addBtn:"InputForm_addBtn__1129H",isNow:"InputForm_isNow__1B2Di"}},91:function(e,t,a){e.exports={form:"InputFormList_form__1PVH_",text:"InputFormList_text__1KX87",addBtn:"InputFormList_addBtn__3w8m6"}}},[[209,1,2]]]);
//# sourceMappingURL=main.47704514.chunk.js.map